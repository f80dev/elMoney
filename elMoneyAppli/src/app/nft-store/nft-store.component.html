<div class="mainform">
  <app-hourglass [message]="message"></app-hourglass>

  <div *ngIf="nfts.length==0 && message.length==0">
    Aucun token disponible pour l'instant
    &nbsp;<mat-icon style="font-size: small;" (click)="refresh()">refresh</mat-icon>
    <br><br><br>
    <button mat-raised-button
            mat-button class="app-button"
            (click)="router.navigate(['importer'])">
      Vendez le votre
    </button>
    <br><br>
  </div>

  Voir uniquement:
  <mat-checkbox [(ngModel)]="perso_only" (ngModelChange)="refresh(false)">les miens</mat-checkbox>
  &nbsp;
  <mat-checkbox [(ngModel)]="mined_only" (ngModelChange)="refresh(false)">mes fabrications</mat-checkbox>
  <br>

  <div *ngIf="nfts.length>0" style="margin: 5px;padding:5px;" class="wrap-list" >
    <mat-card class="app-card" style="width:250px" *ngFor="let nft of nfts">
      <mat-card-header>
        <img mat-card-avatar src="./assets/icons/gift.png" class="image-icon">
        <mat-card-title>
              {{nft.uri}}
        </mat-card-title>
        <mat-card-subtitle>
          <small *ngIf="nft.price==0">Gratuit (hors transaction)</small>
          <small *ngIf="nft.price>0">{{nft.price}} xEGld (+{{transac_cost}} r√©seau)</small>
        </mat-card-subtitle>
      </mat-card-header>
  <!--    <img mat-card-image src="https://material.angular.io/assets/img/examples/shiba2.jpg" alt="Photo of a Shiba Inu">-->
      <mat-card-content>
          <div *ngIf="nft.message?.length>0">
            <app-hourglass [message]="nft.message" fontsize="small"></app-hourglass>
          </div>
          <div *ngIf="nft.open?.length>0">
            <strong>{{nft.open}}</strong>
          </div>
      </mat-card-content>
      <mat-card-actions class="app-card-action">
          <div *ngIf="nft.message?.length==0 && nft.open?.length==0">
            <button t-raised-button mat-button class="app-button"
                    *ngIf="nft.owner!=user.addr"
                    (click)="buy(nft)">
             Acheter
            </button>
            <div *ngIf="nft.owner==user.addr">
              <button mat-raised-button mat-button
                      color="primary"
                      *ngIf="nft.state==1"
                      class="app-button"
                      (click)="open(nft)">
               Ouvrir
              </button>
              <button mat-icon-button mat-flat-button
                      *ngIf="nft.state==0"
                      title="Retirer de la vente"
                      class="icon-button"
                      (click)="setstate(nft,1,'retirer de la vente')">
                <mat-icon>remove_shopping_cart</mat-icon>
              </button>

              <button mat-raised-button mat-button class="app-button"
                      *ngIf="nft.state==1"
                      (click)="setstate(nft,0,'mise en vente')">
                Vendre
              </button>
              <button mat-icon-button mat-flat-button
                      *ngIf="nft.state==1 && nft.owner==user.addr"
                      class="icon-button"
                      (click)="burn(nft)">
                <mat-icon>delete</mat-icon>
              </button>
            </div>

          </div>

          <div *ngIf="nft.open?.length>0">
            <button mat-icon-button
                    class="icon-button"
                    (click)="nft.open=''">
              <mat-icon>visibility_off</mat-icon>
            </button>
          </div>
      </mat-card-actions>
    </mat-card>
  </div>

</div>
