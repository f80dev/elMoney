<div class="mainform">
  <app-hourglass [message]="message"></app-hourglass>
  <div *ngIf="message?.length==0">
    <div title="Les destinataires de vos envois" style="width: 100%;text-align: center;">
          <div *ngFor="let fr of friends"
              [title]="fr.email"
              [ngStyle]="{'lineHeight':'80%','margin':'2px','padding-top':'5px','padding-bottom':'5px','width':'75px','cursor':'pointer','display':'inline-block','color':fr.color}"
              (mousedown)="select_friends(fr)">

            <mat-icon>{{fr.icon}}</mat-icon><br>
            <span style="font-size: small">{{fr.label}}</span>
          </div>
    </div>
    <br>


    <div
      style="width:100%;text-align: center;"
      *ngIf="_max>0"
      title="Augmenté la valeur à transférer en utilisant ces boutons suivant le montant que vous souhaitez atteindre">

      <div *ngIf="hand==0">Nombre de {{user.unity}} à envoyer:</div>

      <div *ngIf="showSlider" style="width: 100vw;text-align: center;">


         <button mat-raised-button mat-button class="app-button"
                 *ngIf="n_profils>0 && hand>0"
          (click)="send_to()">
            <div class="bloc-bouton" style="height:60px;">
              <mat-icon>arrow_drop_up</mat-icon><br>
              Envoyer {{hand}} {{user.unity.toLowerCase()}}<br>à

              <span *ngIf="n_profils>1">
                {{n_profils}} personnes
              </span>
              <span *ngIf="n_profils==1">
                {{last_pseudo}}
              </span>

            </div>
          </button>

        <button mat-raised-button mat-button class="app-button"
                 *ngIf="hand>0 && n_profils==0"
          (click)="add_contact()">
            <div class="bloc-bouton" style="height:60px;">
              <mat-icon>person_add</mat-icon><br>
              Envoyer {{hand}} {{user.unity.toLowerCase()}}<br>
              directement
            </div>
          </button>

        <table style="display: inline-block;width:90%;">
          <tr style="width: 100%;">
            <td style="width: 10px;font-size: x-large;text-align: right;">0</td>
            <td style="width:70vw;">
              <mat-slider thumbLabel
                          color="primary"
                          style="width: 100%;"
                          [(ngModel)]="hand"
                          (ngModelChange)="update_account()"
                          min="0" [max]="_max">
              </mat-slider>
            </td>
            <td style="width: 10px;font-size: x-large;text-align: left;">
              {{_max}}
            </td>
          </tr></table>

      </div>


      <table style="width: 100%;text-align: center;"
             *ngIf="!showSlider">

<!--        <tr>-->
<!--          <td *ngFor="let bt of buttons" style="line-height: 60%;">-->
<!--            <mat-icon  *ngIf="bt.value<=user.balance">arrow_drop_up</mat-icon>-->
<!--            <br>-->
<!--            <button mat-raised-button mat-button mat-icon-button-->
<!--                    *ngIf="bt.value<=user.balance"-->
<!--                    [title]="'sortir '+bt.value+' '+user.unity.toLowerCase()+' de mon wallet'"-->
<!--                    class="large-icon-button mat-elevation-z12"-->
<!--                    color="primary"-->
<!--                    (click)="addInHand(bt.value)">-->
<!--              <span *ngIf="bt.label">{{bt.label}}</span>-->
<!--              <span *ngIf="!bt.label">{{bt.value}}</span>-->
<!--            </button>-->
<!--          </td>-->
<!--        </tr>-->
      </table>
    </div>

  </div>

  <br><br>
  <mat-progress-spinner diameter="20px"
                        *ngIf="hourglass"></mat-progress-spinner>
  <app-account [solde]="user.balance"
               title="La somme disponible dans votre wallet (de la monnaie sélectionnée)"
               fontsize="4em"
               (change)="update_account()"
               [unity]="user.unity">
  </app-account>
  <br>



  <br>
  <button mat-raised-button mat-button class="app-button"
          *ngIf="user.unity && !showQRCode"
          (click)="showQRCode=true">
    Recevoir
  </button>

  <mat-icon *ngIf="showQRCode">arrow_drop_up</mat-icon>
  <br>
  <div *ngIf="showQRCode">
    <qrcode
      [width]="150"
      ngxClipboard
      [cdkCopyToClipboard]="user.addr"
      (click)="informe_clipboard()"
      style="display: inline-block;"
      [elementType]="'svg'"
      [errorCorrectionLevel]="'M'"
      [qrdata]="user.addr">
    </qrcode><br>
    <small>Flashez pour recevoir des '{{user.unity}}'</small>
  </div>

</div>
